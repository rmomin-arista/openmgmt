
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Arista Open Management repository documentation">
      
      
        <meta name="author" content="Arista Networks">
      
      
        <link rel="canonical" href="https://aristanetworks.github.io/openmgmt/configuration/openconfig/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.5.2">
    
    
      
        <title>OpenConfig Configuration - Open Management</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.9f9400aa.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-4V8W728SS9"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-4V8W728SS9",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-4V8W728SS9",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Open Management" class="md-header__button md-logo" aria-label="Open Management" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Open Management
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OpenConfig Configuration
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aristanetworks/openmgmt" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    openmgmt on Github
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Open Management" class="md-nav__button md-logo" aria-label="Open Management" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Open Management
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aristanetworks/openmgmt" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    openmgmt on Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          OpenConfig
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        OpenConfig
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#platform-compatibility" class="md-nav__link">
    Platform compatibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnmi" class="md-nav__link">
    gNMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#octa" class="md-nav__link">
    OCTA
  </a>
  
    <nav class="md-nav" aria-label="OCTA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-enable-octa" class="md-nav__link">
    How to enable Octa
  </a>
  
    <nav class="md-nav" aria-label="How to enable Octa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-models" class="md-nav__link">
    API models
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aaa-accounting-for-gnmiopenconfig" class="md-nav__link">
    AAA Accounting for gNMI/OpenConfig
  </a>
  
    <nav class="md-nav" aria-label="AAA Accounting for gNMI/OpenConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gnmi-per-rpc-role-authorizations" class="md-nav__link">
    gNMI per-RPC role authorizations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enable-aft-mapping" class="md-nav__link">
    Enable AFT mapping
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telemetry-timestamps" class="md-nav__link">
    Telemetry Timestamps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-persistence" class="md-nav__link">
    Configuration Persistence
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations_1" class="md-nav__link">
    Limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-openconfig-paths" class="md-nav__link">
    Supported OpenConfig paths
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references-resources" class="md-nav__link">
    References / Resources
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../netconf/" class="md-nav__link">
        NETCONF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../restconf/" class="md-nav__link">
        RESTCONF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mtls/" class="md-nav__link">
        Certificate Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        Security Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/ansible/" class="md-nav__link">
        Ansible
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          gNMI clients
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="gNMI clients" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          gNMI clients
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnmi-clients/arista-gnmi/" class="md-nav__link">
        gnmi (Arista)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnmi-clients/gnmic/" class="md-nav__link">
        gnmic
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnmi-gateway/" class="md-nav__link">
        gNMI gateway
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4">
          gNOI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="gNOI" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          gNOI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnoi/" class="md-nav__link">
        About gNOI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnoi/gnoic/" class="md-nav__link">
        gNOIc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnoi/grpcurl/" class="md-nav__link">
        gRPCurl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gnoi/gnoicode/" class="md-nav__link">
        gNOI in Golang
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/golang/" class="md-nav__link">
        Go Lang
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_6">
          NETCONF
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="NETCONF" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          NETCONF
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/netconf/" class="md-nav__link">
        About NETCONF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/netconf/ncclient/" class="md-nav__link">
        ncclient
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/netconf/netconf_over_ssh/" class="md-nav__link">
        NETCONF over SSH
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/pygnmi/" class="md-nav__link">
        Pygnmi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/pyang/" class="md-nav__link">
        Pyang
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/pyangbind/" class="md-nav__link">
        Pyangbind
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_10" type="checkbox" id="__nav_3_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_10">
          RESTCONF
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="RESTCONF" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_10">
          <span class="md-nav__icon md-icon"></span>
          RESTCONF
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/restconf/" class="md-nav__link">
        About RESTCONF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/restconf/curl/" class="md-nav__link">
        cURL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/restconf/python/" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/ygot/" class="md-nav__link">
        ygot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/WiFi/" class="md-nav__link">
        WiFi
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Telemetry
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Telemetry" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Telemetry
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../telemetry/adapters/gnmireverse/" class="md-nav__link">
        gNMIReverse
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../telemetry/adapters/ocprometheus/" class="md-nav__link">
        ocprometheus
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../models/" class="md-nav__link">
        Models
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../videos/" class="md-nav__link">
        Videos
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#platform-compatibility" class="md-nav__link">
    Platform compatibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnmi" class="md-nav__link">
    gNMI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#octa" class="md-nav__link">
    OCTA
  </a>
  
    <nav class="md-nav" aria-label="OCTA">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-enable-octa" class="md-nav__link">
    How to enable Octa
  </a>
  
    <nav class="md-nav" aria-label="How to enable Octa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#api-models" class="md-nav__link">
    API models
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aaa-accounting-for-gnmiopenconfig" class="md-nav__link">
    AAA Accounting for gNMI/OpenConfig
  </a>
  
    <nav class="md-nav" aria-label="AAA Accounting for gNMI/OpenConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gnmi-per-rpc-role-authorizations" class="md-nav__link">
    gNMI per-RPC role authorizations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enable-aft-mapping" class="md-nav__link">
    Enable AFT mapping
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#telemetry-timestamps" class="md-nav__link">
    Telemetry Timestamps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-persistence" class="md-nav__link">
    Configuration Persistence
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#limitations_1" class="md-nav__link">
    Limitations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-openconfig-paths" class="md-nav__link">
    Supported OpenConfig paths
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references-resources" class="md-nav__link">
    References / Resources
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/aristanetworks/openmgmt/edit/master/docs/configuration/openconfig.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  <h1>OpenConfig</h1>

<h2 id="overview">Overview</h2>
<p>EOS supports the OpenConfig gNMI interface for device management.</p>
<h3 id="platform-compatibility">Platform compatibility</h3>
<p>All EOS flavors support OpenConfig (phyiscal, virtual, containerized, cloud).</p>
<h3 id="gnmi">gNMI</h3>
<p>To start the gNMI server, which listens by default on TCP/6030 configure the gRPC transport under <code>management api gnmi</code>
in the global config mode:</p>
<p>Default VRF</p>
<pre><code class="language-text">management api gnmi
  transport grpc openmgmt
</code></pre>
<p>Non-default VRF</p>
<pre><code class="language-text">management api gnmi
   transport grpc openmgmt
     vrf management
</code></pre>
<p>Changing the port:</p>
<pre><code class="language-text">management api gnmi
   transport grpc openmgmt
      port 5900
</code></pre>
<p>Apply ACL</p>
<pre><code class="language-text">management api gnmi
   transport grpc openmgmt
      ip access-group ACCESS_GROUP
</code></pre>
<p>Note, the ACL should be a standard ACL allowing hosts or subnets.</p>
<p>Authenticate the connection with TLS</p>
<pre><code class="language-text">management api gnmi
   transport grpc openmgmt
      ssl profile PROFILE
</code></pre>
<p>Enable authorization of incoming requests</p>
<pre><code class="language-text">management api gnmi
   transport grpc openmgmt
      authorization requests
</code></pre>
<p>Status check</p>
<pre><code class="language-text">#show management api gnmi
Octa:               No
Enabled:            Yes
Server:             running on port 6030, in default VRF
SSL Profile:        none
QoS DSCP:           none
</code></pre>
<h3 id="octa">OCTA</h3>
<p>The OpenConfig agent (gNMI API) can leverage the EOS state streaming agent's (TerminAttr) libraries, thus exposing EOS
native paths. If Octa (OpenConfig + TerminAttr) is enabled then OpenConfig, in addition to accepting OpenConfig paths in
gNMI get/subscribe requests, will also support EOS native paths (e.g. Sysdb/Smash paths). This feature was introduced in
<code>4.22.1F</code>.</p>
<p>gNMI requests received by Octa are interpreted as either OpenConfig or TerminAttr requests, as follows.</p>
<ul>
<li>gNMI requests containing an origin of <code>eos_native</code> are processed as as native path requests.</li>
<li>Requests lacking an origin of <code>eos_native</code> are treated as OpenConfig requests.</li>
</ul>
<p>A gNMI client that supports specification of an origin as part of the associated RPC is a requirement.</p>
<p>Note support for sending GET/SUBSCRIBE requests to both an openconfig and an eos-native path in the same call is not yet
supported.</p>
<h4 id="how-to-enable-octa">How to enable Octa</h4>
<p>Octa can be enable by adding <code>provider eos-native</code> under <code>management api gnmi</code></p>
<p><code>SW(config-mgmt-api-gnmi)#provider eos-native</code></p>
<p>Status check</p>
<pre><code class="language-text">#show management api gnmi
Octa:               enabled
Enabled:            Yes
Server:             running on port 6030, in default VRF
SSL Profile:        none
QoS DSCP:           none
</code></pre>
<h5 id="api-models">API models</h5>
<p>Starting in EOS <code>4.24.0F</code> it is possible to configure the Smash paths that Octa has access to. Under the <code>management api
models</code> mode, the provider smash sub-mode allows for enabling or disabling a Smash path with the <code>[no] path
smash_path_here [disabled]</code> command.</p>
<pre><code class="language-text">management api models
   provider smash
      path forwarding/status
      path routing/status disabled
      path routing/isis/lsdb
</code></pre>
<p>Note that every time a new path is added the Octa agent has to be restarted.
EOS CLI:</p>
<pre><code class="language-text">management api gnmi
   transport grpc &lt;NAME&gt;
   shutdown
   no shutdown
</code></pre>
<p>Bash:
<code>$ sudo killall Octa</code></p>
<p>Alternatively <code>agent Octa terminate</code> can be used from EOS CLI as well.</p>
<p><code>show management api models</code> will list the Smash paths enabled/disabled</p>
<p>e.g.:</p>
<pre><code class="language-text">#show management api models
provider smash
  path /Smash/bridging
  path /Smash/forwarding/status
  path /Smash/routing/isis/lsdb
  path /Smash/routing
  path /Smash/routing/status disabled
provider sysdb
</code></pre>
<h2 id="aaa-accounting-for-gnmiopenconfig">AAA Accounting for gNMI/OpenConfig</h2>
<p>Starting with EOS 4.27.2F <code>accounting requests</code> can be enabled to account records for gNMI/gNOI RPCs:</p>
<pre><code class="language-text">management api gnmi
   transport grpc default
      authorization requests
      accounting requests
   provider eos-native
!
aaa accounting commands all default start-stop logging
</code></pre>
<p>we can also use these commands to log to tacacs+ or radius and syslog too</p>
<pre><code class="language-text">aaa accounting commands all default start-stop group tacacs+
aaa accounting commands all default start-stop group radius
</code></pre>
<pre><code class="language-text">spine1# sh management api gnmi 
Octa: enabled

Transport: default
Enabled: yes
Server: running on port 6030, in default VRF
SSL profile: none
QoS DSCP: none
Authorization required: yes
Accounting requests: yes
Certificate username authentication: no
Notification timestamp: last change time
Listen addresses: ::
spine1#
</code></pre>
<p>Configuration change using OpenConfig and gNMI:</p>
<pre><code class="language-text">$ gnmic -a 192.168.0.10:6030 -u arista -p arista77rx --insecure set --update-path &quot;/interfaces/interface[name=Ethernet1]/config/description&quot; --update-value &quot;test&quot;
{
  &quot;source&quot;: &quot;192.168.0.10:6030&quot;,
  &quot;timestamp&quot;: 1663615213475353999,
  &quot;time&quot;: &quot;2022-09-19T19:20:13.475353999Z&quot;,
  &quot;results&quot;: [
    {
      &quot;operation&quot;: &quot;UPDATE&quot;,
      &quot;path&quot;: &quot;interfaces/interface[name=Ethernet1]/config/description&quot;
    }
  ]
}
</code></pre>
<pre><code class="language-text">$ gnmic -a 192.168.0.10:6030 -u arista -p arista77rx --insecure get --path &quot;/interfaces/interface[name=Ethernet1]/config/description&quot;
[
  {
    &quot;source&quot;: &quot;192.168.0.10:6030&quot;,
    &quot;timestamp&quot;: 1663615224964145128,
    &quot;time&quot;: &quot;2022-09-19T19:20:24.964145128Z&quot;,
    &quot;updates&quot;: [
      {
        &quot;Path&quot;: &quot;interfaces/interface[name=Ethernet1]/config/description&quot;,
        &quot;values&quot;: {
          &quot;interfaces/interface/config/description&quot;: &quot;test&quot;
        }
      }
    ]
  }
] 
</code></pre>
<p>Syslog messages on the device:</p>
<pre><code class="language-text">spine1#sh logging last 5 minutes
Sep 19 19:20:13 spine1 Aaa: %ACCOUNTING-6-CMD: arista unknown unknown stop task_id=34 start_time=1663615213.48 timezone=UTC service=shell priv-lvl=15 cmd=OpenConfig.Set addr=192.168.0.1:57388 rpc=/gnmi.gNMI/Set request={&quot;update&quot;:[{&quot;path&quot;:&quot;/interfaces/interface[name=Ethernet1]/config/description&quot;,&quot;val&quot;:&quot;\\&quot;test\\&quot;&quot;}]} &lt;cr&gt;
Sep 19 19:20:13 spine1 ConfigAgent: %SYS-5-CONFIG_SESSION_ENTERED: User arista entered configuration session session11521733719371 on GNMI (192.168.0.1:57388)
Sep 19 19:20:13 spine1 ConfigAgent: %SYS-5-CONFIG_SESSION_COMMIT_SUCCESS: User arista committed configuration session session11521733719371 successfully on GNMI (192.168.0.1:57388)
Sep 19 19:20:13 spine1 ConfigAgent: %SYS-5-CONFIG_SESSION_EXITED: User arista exited configuration session session11521733719371 on GNMI (192.168.0.1:57388)
Sep 19 19:20:24 spine1 Aaa: %ACCOUNTING-6-CMD: arista unknown unknown stop task_id=35 start_time=1663615224.96 timezone=UTC service=shell priv-lvl=15 cmd=OpenConfig.Get addr=192.168.0.1:57428 rpc=/gnmi.gNMI/Get request={&quot;path&quot;:[{&quot;path&quot;:&quot;/interfaces/interface[name=Ethernet1]/config/description&quot;}]} &lt;cr&gt;
</code></pre>
<pre><code class="language-text">spine1#trace monitor octa
--- Monitoring /var/log/agents/Octa-3748 ---
I0919 19:20:13.715618    3748 router.go:234] Cli commands:
configure session session11521733719371
interface Ethernet1
description test
exit
configure session session11521733719371 commit
^Cspine1#
</code></pre>
<pre><code class="language-text">spine1#bash ps -ef | grep Octa
root      3748   480  2 16:51 ?        00:03:20 /usr/bin/Octa --agenttitle=Octa
</code></pre>
<pre><code class="language-text">spine1#bash  more /var/log/agents/Octa-3748 | tail -4
interface Ethernet1
description test
exit
configure session session11521733719371 commit
spine1#
</code></pre>
<h3 id="limitations">Limitations</h3>
<p>An accounting record is limited to a maximum of 8098 characters.<br />
The record will be truncated if it exceeds the maximum character length.</p>
<h2 id="gnmi-per-rpc-role-authorizations">gNMI per-RPC role authorizations</h2>
<p>Starting in EOS <code>4.24.1F</code> it is possible to perform authorization of each RPC (i.e. GET, SET, SUBSCRIBE), if
authorization requests is supplied as described above.</p>
<p>During authorization, the OpenConfig agent will communicate with the AAA agent, allowing authorization policies or roles
to permit or deny the new tokens OpenConfig.Get and OpenConfig.Set.</p>
<p>For example, a role may be defined such as:</p>
<pre><code class="language-text">role oc-read
   10 permit command OpenConfig.Get
</code></pre>
<p>A user which is assigned to this role would be allowed to issue a gNMI GET or SUBSCRIBE request, but not a SET request.</p>
<blockquote>
<p>Note that this is only available for gNMI.</p>
</blockquote>
<h2 id="enable-aft-mapping">Enable AFT mapping</h2>
<p>By default, mapping of the FIB (forwarding information base) to the OpenConfig AFT (abstract forwarding table) model is
disabled, as the volume of data can be large.</p>
<p>Starting in EOS <code>4.25.1F</code> it is possible to enable these mappings, for IPV4, IPV6, or both, as described below:</p>
<pre><code class="language-text">management api models
   provider aft
      ipv4-unicast
      ipv6-unicast
</code></pre>
<blockquote>
<p>Note that prior to EOS 4.27 a restart of the gNMI agent is required, e.g.: <code>agent Octa terminate</code> or
<code>agent OpenConfig terminate</code> (in case the eos-native provider is not enabled).</p>
</blockquote>
<h2 id="telemetry-timestamps">Telemetry Timestamps</h2>
<p>Per the GNMI specification, the default timestamp field of a notification message is set to be the time at which the
value of the underlying data source changes or when the reported event takes place.  In order to facilitate integration
in legacy environments oriented around polling style operations, an option to support overriding the timestamp field to
the send-time is available. (as of 4.27.0F)</p>
<p>Overriding the timestamp to <code>send-time</code> is applicable to all STREAM and POLL subscriptions.</p>
<p>Configuration is outlined below.</p>
<pre><code class="language-text">management api gnmi
   transport grpc &lt;NAME&gt;
      notification timestamp send-time
</code></pre>
<p>If there's a need to return to the standards-oriented operation, the following mechanisms can be used to reset the
behavior.</p>
<pre><code class="language-text">no notification timestamp send-time
default notification timestamp
notification timestamp last-change-time
</code></pre>
<details><summary>Validation</summary>
<p>


<pre><code class="language-text">#show management api gnmi
Octa: enabled
Set persistence: enabled

Transport: default
Enabled: yes
Server: running on port 6030, in default VRF
SSL profile: none
QoS DSCP: none
Authorization required: no
Accounting requests: no
Certificate username authentication: no
Notification timestamp: send time  !! note: timestamp mode
Listen addresses: ::
</code></pre>


</p>
</details>

<h2 id="configuration-persistence">Configuration Persistence</h2>
<p>By default, within EOS, the application of gNMI <code>Set</code> RPCs are not persisted to the <code>startup-config</code>.  A <code>copy
running-config startup-config</code> is required in order to save configuration updates imposed via gNMI.</p>
<p>As of EOS 4.28.0F, if the operator desires to be able to save gNMI-driven configuration automatically, persistence can be
enabled by adding the following configuration. With this option, all gnmi <code>Set</code> operations will be saved to the
<code>startup-config</code>. Note, the configuration is saved using Arista's EOS configuration syntax and there is no corresponding
presentation of the OpenConfig syntax.</p>
<pre><code class="language-text">management api gnmi
   transport grpc &lt;NAME&gt;
   operation set persistence
</code></pre>
<p>If there is a need to return to the default mode of gNMI configuration non-persistence, this can be disabled using the
following commands.</p>
<pre><code class="language-text">no operation set persistence
default operation set persistence
</code></pre>
<details><summary>Validation</summary>
<p>


<pre><code class="language-text">#show management api gnmi
Octa: enabled
Set persistence: enabled  !! note: persistence state

Transport: default
Enabled: yes
Server: running on port 6030, in default VRF
SSL profile: none
QoS DSCP: none
Authorization required: no
Accounting requests: no
Certificate username authentication: no
Notification timestamp: last change time
Listen addresses: ::
</code></pre>


</p>
</details>

<h2 id="troubleshooting">Troubleshooting</h2>
<p>The OpenConfig agent handles all transports described above: gNMI, RESTCONF, and
NETCONF. The agent log file is present at <code>/var/log/agents/OpenConfig-{PID}</code>.
Lines that begin with <code>E</code> are errors. Debug logging can be enabled with a
regular trace command. Here are a couple of examples:</p>
<p><code>(config)#trace OpenConfig setting server/9</code> - For server (gNMI) traces</p>
<p><code>(config)#trace OpenConfig setting */9</code> - For all traces with verbose setting</p>
<p>similarly if Octa is enabled:</p>
<p><code>(config)#trace Octa setting server/9</code> - For server (gNMI) traces</p>
<p><code>(config)#trace Octa setting */9</code> - For all traces with verbose setting</p>
<h2 id="limitations_1">Limitations</h2>
<ul>
<li>In EOS versions prior to <code>4.24.0F</code>, not all Smash paths were accessible via Octa.</li>
<li>Starting in EOS <code>4.24.0F</code> configuring the Smash paths that Octa has access to will also affect OpenConfig. Enabling a
  Smash path for Octa can result in extra YANG paths being populated in OpenConfig. Disabling a Smash path can result in
  having some YANG paths missing in OpenConfig.</li>
<li>The <code>%&lt;zone-id&gt;</code> optional suffix in YANG <code>ietf:ipv4-address</code>, and <code>ietf:ipv6-address</code> types are not supported.</li>
<li>An OpenConfig client update/merge/replace request can erase config that is not modified by the incoming request. This
  happens if a config that is part of a certain mount point but not supported by OpenConfig is configured via CLI prior
  to the OpenConfig client update/merge/replace request is processed.</li>
</ul>
<h2 id="supported-openconfig-paths">Supported OpenConfig paths</h2>
<p>Please refer to the <a href="https://eos.arista.com/toi/">EOS Central TOIs</a> to see the new list of paths supported per release.</p>
<p>For convenience, supported paths may be found at: <a href="https://eos.arista.com/path-report">https://eos.arista.com/path-report</a>.</p>
<h2 id="references-resources">References / Resources</h2>
<ul>
<li>The OpenConfig working group: <a href="http://openconfig.net/">http://openconfig.net/</a></li>
<li>Repository of gNMI specifications: <a href="https://github.com/openconfig/reference/">https://github.com/openconfig/reference/</a></li>
</ul>


  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../.." class="md-footer__link md-footer__link--prev" aria-label="Previous: Home" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Home
            </div>
          </div>
        </a>
      
      
        
        <a href="../netconf/" class="md-footer__link md-footer__link--next" aria-label="Next: NETCONF" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              NETCONF
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.39f04ddb.min.js"></script>
      
    
  </body>
</html>